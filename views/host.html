<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/CSS/style.css">
    <!-- <script src="../index.js"></script> -->
    <script src="../public/helper.js"></script>

    <title>Host Page</title>
</head>
<body onload="fetchData()">
  <header class="clearfix">
    <div class="logo-container"><img src="" alt="Logo"></div>
    <a href="/logout">LOGOUT</a>
  </header>

  <!-- <div class="add-page">
    <div class="cross">
      <span class="cross-container"><i class="fa fa-times" onclick="loadHome()"></i></span>
    </div>
    <div class="test-name">
      <input type="text" value="ADD A TEST NAME">
    </div>
    <div class="host-question">
      <h3>Question</h3>
      <textarea></textarea>
    </div>
    <div class="add-answers">
      <div><input type="text" name="answer" value="Correct answer"></div>
      <div><input type="text" name="option2" value="option2"></div>
      <div><input type="text" name="option3" value="option3"></div>
      <div><input type="text" name="option4" value="option4"></div>
    </div>
    <a class="add-question-btn" href="/newTest-page"><i class="fa fa-plus"></i><span>ADD</span></a>      
  </div> -->

  <div class="confirm">
    <div class="cross">
      <span class="cross-container"><i class="fa fa-times" onclick="loadHome()"></i></span>
    </div>
    <div class="confirm-details">
      <span class="confirm-icon"><i class="fa fa-exclamation"></i></span>
      <h1>Are you sure you want to delete this record?</h1>
      <div class="confirm-btn-wrapper">
        <a class="cancel-btn" href=""><span>CANCEL</span></a>
        <a class="ok-btn" href=""><span>DELETE</span></a>
      </div>
    </div>
  </div>

  <div class="host-details">
    <h3>TESTS HOSTED BY YOU</h3>
    <!-- <span class="back-btn"><a href="" onclick="loadResult()"><i class="fa fa-arrow-left"></i></a></span> -->
    <a class="add-btn" href="/newTest-page"><i class="fa fa-plus"></i><span>ADD</span></a>
    <div class="test-hosted">
      <div class="test">
        <!-- <div class="your-test clearfix">
          <div class="topic-container">
            <h4>Topic</h4>
            <p>HTML</p>
          </div>
          <div class="question-container">
            <h4>Questions</h4>
            <p>20</p>
          </div>
          <div class="btn-container clearfix">
            <a href="" class="edit-btn">
              <i class="fa fa-pencil"></i>
              <span>EDIT</span>
            </a>
            <a onclick="loadConfirmation()" class="delete-btn">
              <i class="fa fa-trash"></i>
              <span>DELETE</span>
            </a>
          </div>
        </div> 

        <div class="your-test clearfix">
          <div class="topic-container">
            <h4>Topic</h4>
            <p>HTML</p>
          </div>
          <div class="question-container">
            <h4>Questions</h4>
            <p>20</p>
          </div>
          <div class="btn-container clearfix">
            <a href="" class="edit-btn">
              <i class="fa fa-pencil"></i>
              <span>EDIT</span>
            </a>
            <a href="" class="delete-btn">
              <i class="fa fa-trash"></i>
              <span>DELETE</span>
            </a>
          </div>
        </div>   
        
        <div class="your-test clearfix">
          <div class="topic-container">
            <h4>Topic</h4>
            <p>HTML</p>
          </div>
          <div class="question-container">
            <h4>Questions</h4>
            <p>20</p>
          </div>
          <div class="btn-container clearfix">
            <a href="" class="edit-btn">
              <i class="fa fa-pencil"></i>
              <span>EDIT</span>
            </a>
            <a href="" class="delete-btn">
              <i class="fa fa-trash"></i>
              <span>DELETE</span>
            </a>
          </div>
        </div> 

        <div class="your-test clearfix">
          <div class="topic-container">
            <h4>Topic</h4>
            <p>HTML</p>
          </div>
          <div class="question-container">
            <h4>Questions</h4>
            <p>20</p>
          </div>
          <div class="btn-container clearfix">
            <a href="" class="edit-btn">
              <i class="fa fa-pencil"></i>
              <span>EDIT</span>
            </a>
            <a href="" class="delete-btn">
              <i class="fa fa-trash"></i>
              <span>DELETE</span>
            </a>
          </div>
        </div>  -->
      </div>
    </div>
  </div>

  <footer>
    <p>copyright info</p>
  </footer>
  <script>
    var testname;
    var questions = []

    function fetchData() {
      var request = new XMLHttpRequest();
      request.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        var newData = JSON.parse(this.response)
        console.log(newData)
        let parent = document.getElementsByClassName('test')[0]
        for(let i = 0;i < newData.length;i++){
          let topicContainer = document.createElement("div")
          topicContainer.setAttribute("class",'topic-container')
          let h4 = document.createElement("h4")
          h4.innerHTML = "TOPIC"
          let p = document.createElement("p")
          p.innerHTML = newData[i].testname
          topicContainer.appendChild(h4)
          topicContainer.appendChild(p)
          let questionContainer = document.createElement("div")
          questionContainer.setAttribute("class",'question-container')
          h4 = document.createElement("h4")
          h4.innerHTML = "Questions"
          p = document.createElement("p")
          p.innerHTML = newData[i].questions.length
          questionContainer.appendChild(h4)
          questionContainer.appendChild(p)

          //Edit btn

          let btnContainer = document.createElement("div")
          btnContainer.setAttribute("class","btn-container clearfix")
          let editBtn = document.createElement("a")
          editBtn.setAttribute("class","edit-btn")
          let icon = document.createElement("i")
          icon.setAttribute("class","fa fa-pencil")
          let txt = document.createElement("span")
          txt.innerHTML = "EDIT"
          editBtn.appendChild(icon)
          editBtn.appendChild(txt)
          btnContainer.appendChild(editBtn)

          //Delete btn

          let deleteBtn = document.createElement("a")
          deleteBtn.setAttribute("class","delete-btn")
          icon = document.createElement("i")
          icon.setAttribute("class","fa fa-trash")
          txt = document.createElement("span")
          txt.innerHTML = "DELETE"
          deleteBtn.appendChild(icon)
          deleteBtn.appendChild(txt)
          btnContainer.appendChild(deleteBtn)


          let yourTest = document.createElement("div")
          yourTest.setAttribute("class","your-test clearfix")
          yourTest.appendChild(topicContainer)
          yourTest.appendChild(questionContainer)
          yourTest.appendChild(btnContainer)
          parent.appendChild(yourTest)
        }
      }
      };
      request.open('GET','/fetch-data', true)
      request.send();
    }

  </script>
</body>
</html>